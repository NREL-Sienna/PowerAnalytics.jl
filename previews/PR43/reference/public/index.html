<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Public API · PowerAnalytics.jl</title><meta name="title" content="Public API · PowerAnalytics.jl"/><meta property="og:title" content="Public API · PowerAnalytics.jl"/><meta property="twitter:title" content="Public API · PowerAnalytics.jl"/><meta name="description" content="Documentation for PowerAnalytics.jl."/><meta property="og:description" content="Documentation for PowerAnalytics.jl."/><meta property="twitter:description" content="Documentation for PowerAnalytics.jl."/><script data-outdated-warner src="../../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.050/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.8/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="../.."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../../assets/documenter.js"></script><script src="../../search_index.js"></script><script src="../../siteinfo.js"></script><script src="../../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-mocha.css" data-theme-name="catppuccin-mocha"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-macchiato.css" data-theme-name="catppuccin-macchiato"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-frappe.css" data-theme-name="catppuccin-frappe"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-latte.css" data-theme-name="catppuccin-latte"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><a class="docs-logo" href="../../"><img src="../../assets/logo.png" alt="PowerAnalytics.jl logo"/></a><div class="docs-package-name"><span class="docs-autofit"><a href="../../">PowerAnalytics.jl</a></span></div><button class="docs-search-query input is-rounded is-small is-clickable my-2 mx-auto py-1 px-2" id="documenter-search-query">Search docs (Ctrl + /)</button><ul class="docs-menu"><li><a class="tocitem" href="../../">Welcome Page</a></li><li><span class="tocitem">Tutorials</span><ul><li><a class="tocitem" href="../../tutorials/PA_workflow_tutorial/">Simulation Scenarios Analysis</a></li></ul></li><li><span class="tocitem">Reference</span><ul><li class="is-active"><a class="tocitem" href>Public API</a><ul class="internal"><li><a class="tocitem" href="#ComponentSelector"><span><code>ComponentSelector</code></span></a></li><li><a class="tocitem" href="#Input-Utilities"><span>Input Utilities</span></a></li><li><a class="tocitem" href="#Basic-Metric-Interface"><span>Basic Metric Interface</span></a></li><li><a class="tocitem" href="#Built-in-Metrics"><span>Built-in Metrics</span></a></li><li><a class="tocitem" href="#Built-in-Selectors"><span>Built-in Selectors</span></a></li><li><a class="tocitem" href="#Post-Metric-Utilities"><span>Post-Metric Utilities</span></a></li><li><a class="tocitem" href="#Post-Metric-Accessors"><span>Post-Metric Accessors</span></a></li><li><a class="tocitem" href="#Advanced-Metrics-Interface"><span>Advanced Metrics Interface</span></a></li><li><a class="tocitem" href="#Miscellaneous"><span>Miscellaneous</span></a></li><li><a class="tocitem" href="#Old-PowerAnalytics"><span>Old PowerAnalytics</span></a></li></ul></li><li><input class="collapse-toggle" id="menuitem-3-2" type="checkbox"/><label class="tocitem" for="menuitem-3-2"><span class="docs-label">Developers</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../developer_guidelines/">Developer Guidelines</a></li><li><a class="tocitem" href="../internal/">Internals</a></li></ul></li></ul></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><a class="docs-sidebar-button docs-navbar-link fa-solid fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a><nav class="breadcrumb"><ul class="is-hidden-mobile"><li><a class="is-disabled">Reference</a></li><li class="is-active"><a href>Public API</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Public API</a></li></ul></nav><div class="docs-right"><a class="docs-navbar-link" href="https://github.com/NREL-Sienna/PowerAnalytics.jl" title="View the repository on GitHub"><span class="docs-icon fa-brands"></span><span class="docs-label is-hidden-touch">GitHub</span></a><a class="docs-navbar-link" href="https://github.com/NREL-Sienna/PowerAnalytics.jl/blob/main/docs/src/reference/public.md" title="Edit source on GitHub"><span class="docs-icon fa-solid"></span></a><a class="docs-settings-button docs-navbar-link fa-solid fa-gear" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-article-toggle-button fa-solid fa-chevron-up" id="documenter-article-toggle-button" href="javascript:;" title="Collapse all docstrings"></a></div></header><article class="content" id="documenter-page"><h1 id="Public-API-Reference"><a class="docs-heading-anchor" href="#Public-API-Reference">Public API Reference</a><a id="Public-API-Reference-1"></a><a class="docs-heading-anchor-permalink" href="#Public-API-Reference" title="Permalink"></a></h1><h2 id="ComponentSelector"><a class="docs-heading-anchor" href="#ComponentSelector"><code>ComponentSelector</code></a><a id="ComponentSelector-1"></a><a class="docs-heading-anchor-permalink" href="#ComponentSelector" title="Permalink"></a></h2><p>PowerAnalytics depends heavily on the <code>ComponentSelector</code> feature of PowerSystems.jl. <code>ComponentSelector</code> documentation can be found <a href="https://nrel-sienna.github.io/PowerSystems.jl/stable/api/public/#InfrastructureSystems.ComponentSelector">here</a>. PowerAnalytics provides some <a href="#Built-in-Selectors">built-in selectors</a>, but much of the power of PowerAnalytics comes from the ability to operate on custom <code>ComponentSelector</code>s.</p><h2 id="Input-Utilities"><a class="docs-heading-anchor" href="#Input-Utilities">Input Utilities</a><a id="Input-Utilities-1"></a><a class="docs-heading-anchor-permalink" href="#Input-Utilities" title="Permalink"></a></h2><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="PowerAnalytics.create_problem_results_dict" href="#PowerAnalytics.create_problem_results_dict"><code>PowerAnalytics.create_problem_results_dict</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">create_problem_results_dict(
    results_dir::AbstractString,
    problem::String;
    ...
) -&gt; DataStructures.SortedDict{Any, Any, Base.Order.ForwardOrdering}
create_problem_results_dict(
    results_dir::AbstractString,
    problem::String,
    scenarios::Union{Nothing, Vector{&lt;:AbstractString}};
    populate_system,
    kwargs...
) -&gt; DataStructures.SortedDict{Any, Any, Base.Order.ForwardOrdering}
</code></pre><p>Accept a directory that contains several results subdirectories (that each contain <code>results</code>, <code>problems</code>, etc. sub-subdirectories) and construct a sorted dictionary from <code>String</code> to <a href="https://nrel-sienna.github.io/PowerSimulations.jl/stable/code_base_developer_guide/internal/#PowerSimulations.SimulationProblemResults"><code>PowerSimulations.SimulationProblemResults</code></a> where the keys are the subdirectory names and the values are loaded results datasets.</p><p><strong>Arguments</strong></p><ul><li><code>results_dir::AbstractString</code>: the directory where results subdirectories can be found</li><li><code>problem::String</code>: the name of the problem to load (e.g., <code>UC</code>, <code>ED</code>)</li><li><code>scenarios::Union{Vector{AbstractString}, Nothing} = nothing</code>: a list of scenario subdirectories to load, or <code>nothing</code> to load all the subdirectories</li><li><code>populate_system::Bool = false</code>: whether to automatically load and attach the system; errors if <code>true</code> and the system has not been saved with the results. <strong>This keyword argument is <code>false</code> by default for backwards compatibility, but most PowerAnalytics functionality requires results to have an attached system, so users should typically pass <code>populate_system = true</code>.</strong></li><li><code>kwargs...</code>: further keyword arguments to pass through to <code>get_decision_problem_results</code></li></ul><p><strong>Examples</strong></p><p>Suppose we have the directory <code>data_root</code> with subdirectories <code>results1</code>, <code>results2</code>, and <code>results3</code>, where each of these subdirectories contains <code>problems/UC</code>. Then:</p><pre><code class="language-julia hljs"># Load results for only `results1` and `results2`:
create_problem_results_dict(data_root, &quot;UC&quot;, [&quot;results1&quot;, &quot;results2&quot;]; populate_system = true)
# Load results for all three scenarios:
create_problem_results_dict(data_root, &quot;UC&quot;; populate_system = true)</code></pre><p><strong>See also</strong></p><p><code>create_problem_results_dict</code> is a convenience function that calls public interface in <a href="https://nrel-sienna.github.io/PowerSimulations.jl/stable/"><code>PowerSimulations.jl</code></a>. To read one results set, or several of them that are not all in the same parent directory, invoke that interface directly as needed:</p><pre><code class="language-julia hljs"># Load a single results set
PowerSimulations.get_decision_problem_results(
    PowerSimulations.SimulationResults(path_to_individual_results),
    problem_name; populate_system = true)</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/NREL-Sienna/PowerAnalytics.jl/blob/be0af0fa2b26dbe579f7d4a6ddd6ad8184276435/src/input_utils.jl#L2">source</a></section></article><h2 id="Basic-Metric-Interface"><a class="docs-heading-anchor" href="#Basic-Metric-Interface">Basic Metric Interface</a><a id="Basic-Metric-Interface-1"></a><a class="docs-heading-anchor-permalink" href="#Basic-Metric-Interface" title="Permalink"></a></h2><p>The basic <a href="#PowerAnalytics.Metric"><code>Metric</code></a> interface consists of calling a <code>Metric</code> itself, for computing one <code>Metric</code> at a time, and the <a href="#PowerAnalytics.compute_all"><code>compute_all</code></a> function for bulk computation. Combined with PowerAnalytics&#39; <a href="#Built-in-Metrics">built-in metrics</a>, this is enough to execute many common computations. See <a href="#Advanced-Metrics-Interface">Advanced Metrics Interface</a> for the interface to create custom <code>Metric</code>s.</p><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="PowerAnalytics.Metric" href="#PowerAnalytics.Metric"><code>PowerAnalytics.Metric</code></a> — <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><p>A PowerAnalytics <code>Metric</code> specifies how to compute a useful quantity, like active power or curtailment, from a set of results. Many but not all <code>Metric</code>s require a <code>ComponentSelector</code> to specify which available components of the system the quantity should be computed on, and many but not all <code>Metric</code>s return time series results. In addition to how to compute the output — which may be as simple as looking up a variable or parameter in the results but may involve actual computation — <code>Metric</code>s encapsulate default component-wise and time-wise aggregation behaviors. Metrics can be &quot;called&quot; like functions.</p><p>PowerAnalytics provides a library of pre-built <code>Metric</code>s, <a href="#PowerAnalytics.Metrics"><code>PowerAnalytics.Metrics</code></a>; users may also build their own. In most cases of custom metric creation, it should suffice to instantiate one of the concrete <code>Metric</code> subtypes PowerAnalytics provides; in special cases, the user can create their own subtype that implements <a href="#PowerAnalytics.compute"><code>compute</code></a>.</p><p><strong>Examples</strong></p><p>Given a <a href="https://nrel-sienna.github.io/PowerSimulations.jl/stable/code_base_developer_guide/internal/#PowerSimulations.SimulationProblemResults"><code>PowerSimulations.SimulationProblemResults</code></a> <code>results</code>:</p><pre><code class="language-julia hljs">using PowerAnalytics.Metrics

# Call the built-in `Metric` `calc_active_power` on a `ComponentSelector` to get a
# `DataFrame` of results, where the columns are the groups in the `ComponentSelector` and
# the rows are time:
calc_active_power(make_selector(RenewableDispatch), results)

# Call the built-in `Metric` `calc_system_slack_up`, which refers to the whole system so
# doesn&#39;t need a `ComponentSelector`:
calc_system_slack_up(results)</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/NREL-Sienna/PowerAnalytics.jl/blob/be0af0fa2b26dbe579f7d4a6ddd6ad8184276435/src/metrics.jl#L2">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="PowerAnalytics.TimedMetric" href="#PowerAnalytics.TimedMetric"><code>PowerAnalytics.TimedMetric</code></a> — <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><p><a href="#PowerAnalytics.Metric"><code>Metric</code></a>s that return time series.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/NREL-Sienna/PowerAnalytics.jl/blob/be0af0fa2b26dbe579f7d4a6ddd6ad8184276435/src/metrics.jl#L34">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="PowerAnalytics.TimelessMetric" href="#PowerAnalytics.TimelessMetric"><code>PowerAnalytics.TimelessMetric</code></a> — <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><p><a href="#PowerAnalytics.Metric"><code>Metric</code></a>s that do not return time series.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/NREL-Sienna/PowerAnalytics.jl/blob/be0af0fa2b26dbe579f7d4a6ddd6ad8184276435/src/metrics.jl#L39">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="PowerAnalytics.compute_all" href="#PowerAnalytics.compute_all"><code>PowerAnalytics.compute_all</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">compute_all(
    results::InfrastructureSystems.Results,
    metrics::Vector{&lt;:TimelessMetric};
    ...
) -&gt; Any
compute_all(
    results::InfrastructureSystems.Results,
    metrics::Vector{&lt;:TimelessMetric},
    selectors::Union{Nothing, ComponentSelector, Component, Vector};
    ...
) -&gt; Any
compute_all(
    results::InfrastructureSystems.Results,
    metrics::Vector{&lt;:TimelessMetric},
    selectors::Union{Nothing, ComponentSelector, Component, Vector},
    col_names::Union{Nothing, Vector{&lt;:Union{Nothing, AbstractString}}};
    kwargs...
) -&gt; Any
</code></pre><p>Methods of <a href="#PowerAnalytics.compute_all"><code>compute_all</code></a> for <a href="#PowerAnalytics.TimelessMetric"><code>TimelessMetric</code></a>s. For each <code>(metric, selector, col_name)</code> tuple in <code>zip(metrics, selectors, col_names)</code>, call <a href="#PowerAnalytics.compute"><code>compute</code></a> and collect the results in a <code>DataFrame</code>. All selectors must yield exactly one group.</p><p><strong>Arguments</strong></p><ul><li><code>results::IS.Results</code>: the results from which to fetch data</li><li><code>metrics::Vector{&lt;:TimelessMetric}</code>: the metrics to compute</li><li><code>selectors</code>: either a scalar or vector of <code>Nothing</code>/<a href="https://nrel-sienna.github.io/PowerSystems.jl/stable/api/public/#PowerSystems.Component"><code>Component</code></a>/<code>ComponentSelector</code>: the selectors on which to compute the metrics, or nothing for system/results metrics; broadcast if scalar</li><li><code>col_names::Union{Nothing, Vector{&lt;:Union{Nothing, AbstractString}}} = nothing</code>: a vector of names for the columns of output data. Entries of <code>nothing</code> default to the result of <a href="#PowerAnalytics.metric_selector_to_string"><code>metric_selector_to_string</code></a>; <code>names = nothing</code> is equivalent to an entire vector of <code>nothing</code></li><li><code>kwargs...</code>: pass through to each <a href="#PowerAnalytics.compute"><code>compute</code></a> call</li></ul><p><strong>Examples</strong></p><p>Given a <code>results</code> with the proper data:</p><pre><code class="language-julia hljs">using PowerAnalytics.Metrics
compute_all(results,
    [calc_sum_objective_value, calc_sum_solve_time],
    [nothing, nothing],
    [&quot;objective_value&quot;, &quot;solve_time&quot;]
)  # returns an 1x2 DataFrame with columns `objective_value` and `solve_time`</code></pre><p>See also: <a href="#PowerAnalytics.compute_all-Tuple{InfrastructureSystems.Results, Vararg{Tuple{Union{TimedMetric, TimelessMetric}, Any, Any}}}"><code>compute_all</code> tuple-based interface</a></p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/NREL-Sienna/PowerAnalytics.jl/blob/be0af0fa2b26dbe579f7d4a6ddd6ad8184276435/src/metrics.jl#L504">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="PowerAnalytics.compute_all" href="#PowerAnalytics.compute_all"><code>PowerAnalytics.compute_all</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">compute_all(
    results::InfrastructureSystems.Results,
    metrics::Vector{&lt;:TimedMetric};
    ...
) -&gt; Any
compute_all(
    results::InfrastructureSystems.Results,
    metrics::Vector{&lt;:TimedMetric},
    selectors::Union{Nothing, ComponentSelector, Component, Vector};
    ...
) -&gt; Any
compute_all(
    results::InfrastructureSystems.Results,
    metrics::Vector{&lt;:TimedMetric},
    selectors::Union{Nothing, ComponentSelector, Component, Vector},
    col_names::Union{Nothing, Vector{&lt;:Union{Nothing, AbstractString}}};
    kwargs...
) -&gt; Any
</code></pre><p>Methods of <a href="#PowerAnalytics.compute_all"><code>compute_all</code></a> for <a href="#PowerAnalytics.TimedMetric"><code>TimedMetric</code></a>s. For each <code>(metric, selector, col_name)</code> tuple in <code>zip(metrics, selectors, col_names)</code>, call <a href="#PowerAnalytics.compute"><code>compute</code></a> and collect the results in a <code>DataFrame</code> with a single <code>DateTime</code> column. All selectors must yield exactly one group.</p><p><strong>Arguments</strong></p><ul><li><code>results::IS.Results</code>: the results from which to fetch data</li><li><code>metrics::Vector{&lt;:TimedMetric}</code>: the metrics to compute</li><li><code>selectors</code>: either a scalar or vector of <code>Nothing</code>/<a href="https://nrel-sienna.github.io/PowerSystems.jl/stable/api/public/#PowerSystems.Component"><code>Component</code></a>/<code>ComponentSelector</code>: the selectors on which to compute the metrics, or nothing for system/results metrics; broadcast if scalar</li><li><code>col_names::Union{Nothing, Vector{&lt;:Union{Nothing, AbstractString}}} = nothing</code>: a vector of names for the columns of output data. Entries of <code>nothing</code> default to the result of <a href="#PowerAnalytics.metric_selector_to_string"><code>metric_selector_to_string</code></a>; <code>names = nothing</code> is equivalent to an entire vector of <code>nothing</code></li><li><code>kwargs...</code>: pass through to each <a href="#PowerAnalytics.compute"><code>compute</code></a> call</li></ul><p><strong>Examples</strong></p><p>Given a <code>results</code> with the proper data:</p><pre><code class="language-julia hljs">using PowerAnalytics.Metrics
compute_all(results,
    [calc_active_power, calc_curtailment],
    [make_selector(ThermalStandard; groupby = :all), make_selector(RenewableDispatch; groupby = :all)],
    [&quot;thermal_power&quot;, &quot;renewable_curtailment&quot;]
)  # returns an 8760x3 DataFrame with columns `DateTime`, `thermal_power`, and `renewable_curtailment`</code></pre><p>See also: <a href="#PowerAnalytics.compute_all-Tuple{InfrastructureSystems.Results, Vararg{Tuple{Union{TimedMetric, TimelessMetric}, Any, Any}}}"><code>compute_all</code> tuple-based interface</a></p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/NREL-Sienna/PowerAnalytics.jl/blob/be0af0fa2b26dbe579f7d4a6ddd6ad8184276435/src/metrics.jl#L462">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="PowerAnalytics.compute_all" href="#PowerAnalytics.compute_all"><code>PowerAnalytics.compute_all</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><p><code>compute_all</code> takes several metrics, single-group <code>ComponentSelector</code>s if relevant, and optionally column names and produces a single table with all the output for a given results set. It can be useful to quickly put together a summary statistics table.</p><p><strong>Examples</strong></p><p>See the methods.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/NREL-Sienna/PowerAnalytics.jl/blob/be0af0fa2b26dbe579f7d4a6ddd6ad8184276435/src/metrics.jl#L451">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="PowerAnalytics.compute_all-Tuple{InfrastructureSystems.Results, Vararg{Tuple{Union{TimedMetric, TimelessMetric}, Any, Any}}}" href="#PowerAnalytics.compute_all-Tuple{InfrastructureSystems.Results, Vararg{Tuple{Union{TimedMetric, TimelessMetric}, Any, Any}}}"><code>PowerAnalytics.compute_all</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">compute_all(
    results::InfrastructureSystems.Results,
    computations::Tuple{Union{TimedMetric, TimelessMetric}, Any, Any}...;
    kwargs...
) -&gt; Any
</code></pre><p>For convenience, a variant signature of <a href="#PowerAnalytics.compute_all"><code>compute_all</code></a> where the metrics, selectors, and column names are specified as a list of tuples rather than three separate lists.</p><p><strong>Arguments</strong></p><ul><li><code>results::IS.Results</code>: the results from which to fetch data</li><li><code>computations::(Tuple{&lt;:T, Any, Any} where T &lt;: Union{TimedMetric, TimelessMetric})...</code>: a list of the computations to perform, where each element is a <code>(metric, selector, col_name)</code> where <code>metric</code> is the metric to compute, <code>selector</code> is the <code>ComponentSelector</code> on which to compute the metric or <code>nothing</code> if not relevant, and <code>col_name</code> is the name for the output column of data or nothing to use the default<ul><li><code>kwargs...</code>: pass through to each <a href="#PowerAnalytics.compute"><code>compute</code></a> call</li></ul></li></ul><p><strong>Examples</strong></p><p>Given a <code>results</code> with the proper data:</p><pre><code class="language-julia hljs">my_computations = [
    (calc_active_power, make_selector(ThermalStandard; groupby = :all), &quot;thermal_power&quot;),
    (calc_curtailment, make_selector(RenewableDispatch; groupby = :all), &quot;renewable_curtailment&quot;)
]
compute_all(results, my_computations...)

# The above is equivalent to
compute_all(results,
    [calc_active_power, calc_curtailment],
    [make_selector(ThermalStandard; groupby = :all), make_selector(RenewableDispatch; groupby = :all)],
    [&quot;thermal_power&quot;, &quot;renewable_curtailment&quot;]
)</code></pre><p>See also: <a href="#PowerAnalytics.compute_all"><code>compute_all</code> non-tuple-based interface</a></p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/NREL-Sienna/PowerAnalytics.jl/blob/be0af0fa2b26dbe579f7d4a6ddd6ad8184276435/src/metrics.jl#L546">source</a></section></article><h2 id="Built-in-Metrics"><a class="docs-heading-anchor" href="#Built-in-Metrics">Built-in Metrics</a><a id="Built-in-Metrics-1"></a><a class="docs-heading-anchor-permalink" href="#Built-in-Metrics" title="Permalink"></a></h2><h3 id="Metrics-Submodule"><a class="docs-heading-anchor" href="#Metrics-Submodule"><code>Metrics</code> Submodule</a><a id="Metrics-Submodule-1"></a><a class="docs-heading-anchor-permalink" href="#Metrics-Submodule" title="Permalink"></a></h3><p>Here is defined a &quot;library&quot; of built-in metrics to execute many common power systems post-processing calculations.</p><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="PowerAnalytics.Metrics" href="#PowerAnalytics.Metrics"><code>PowerAnalytics.Metrics</code></a> — <span class="docstring-category">Module</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><p>PowerAnalytics built-in <code>Metric</code>s. Use <code>names</code> to list what is available.</p><p><strong>Examples</strong></p><pre><code class="language-julia hljs">using PowerAnalytics
names(PowerAnalytics.Metrics)  # lists built-in Metrics
PowerAnalytics.Metrics.calc_active_power  # by default, must prefix built-in Metrics with the module name
@isdefined calc_active_power  # -&gt; false
using PowerAnalytics.Metrics
@isdefined calc_active_power  # -&gt; true, can now refer to built-in Metrics without the prefix</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/NREL-Sienna/PowerAnalytics.jl/blob/be0af0fa2b26dbe579f7d4a6ddd6ad8184276435/src/builtin_metrics.jl#L49">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="PowerAnalytics.Metrics.calc_active_power" href="#PowerAnalytics.Metrics.calc_active_power"><code>PowerAnalytics.Metrics.calc_active_power</code></a> — <span class="docstring-category">Constant</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><p>Calculate the active power of the specified <code>ComponentSelector</code></p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/NREL-Sienna/PowerAnalytics.jl/blob/be0af0fa2b26dbe579f7d4a6ddd6ad8184276435/src/builtin_metrics.jl#L117">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="PowerAnalytics.Metrics.calc_active_power_forecast" href="#PowerAnalytics.Metrics.calc_active_power_forecast"><code>PowerAnalytics.Metrics.calc_active_power_forecast</code></a> — <span class="docstring-category">Constant</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><p>Fetch the forecast active power of the specified <code>ComponentSelector</code></p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/NREL-Sienna/PowerAnalytics.jl/blob/be0af0fa2b26dbe579f7d4a6ddd6ad8184276435/src/builtin_metrics.jl#L153">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="PowerAnalytics.Metrics.calc_active_power_in" href="#PowerAnalytics.Metrics.calc_active_power_in"><code>PowerAnalytics.Metrics.calc_active_power_in</code></a> — <span class="docstring-category">Constant</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><p>Calculate the active power input to the specified (storage) <code>ComponentSelector</code></p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/NREL-Sienna/PowerAnalytics.jl/blob/be0af0fa2b26dbe579f7d4a6ddd6ad8184276435/src/builtin_metrics.jl#L129">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="PowerAnalytics.Metrics.calc_active_power_out" href="#PowerAnalytics.Metrics.calc_active_power_out"><code>PowerAnalytics.Metrics.calc_active_power_out</code></a> — <span class="docstring-category">Constant</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><p>Calculate the active power output of the specified (storage) <code>ComponentSelector</code></p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/NREL-Sienna/PowerAnalytics.jl/blob/be0af0fa2b26dbe579f7d4a6ddd6ad8184276435/src/builtin_metrics.jl#L135">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="PowerAnalytics.Metrics.calc_capacity_factor" href="#PowerAnalytics.Metrics.calc_capacity_factor"><code>PowerAnalytics.Metrics.calc_capacity_factor</code></a> — <span class="docstring-category">Constant</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><p>Calculate the capacity factor (actual production/rated production) of the specified <code>ComponentSelector</code></p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/NREL-Sienna/PowerAnalytics.jl/blob/be0af0fa2b26dbe579f7d4a6ddd6ad8184276435/src/builtin_metrics.jl#L257">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="PowerAnalytics.Metrics.calc_curtailment" href="#PowerAnalytics.Metrics.calc_curtailment"><code>PowerAnalytics.Metrics.calc_curtailment</code></a> — <span class="docstring-category">Constant</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><p>Calculate the <code>ActivePowerForecast</code> minus the <code>ActivePower</code> of the given <code>ComponentSelector</code></p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/NREL-Sienna/PowerAnalytics.jl/blob/be0af0fa2b26dbe579f7d4a6ddd6ad8184276435/src/builtin_metrics.jl#L198">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="PowerAnalytics.Metrics.calc_curtailment_frac" href="#PowerAnalytics.Metrics.calc_curtailment_frac"><code>PowerAnalytics.Metrics.calc_curtailment_frac</code></a> — <span class="docstring-category">Constant</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><p>Calculate the curtailment as a fraction of the <code>ActivePowerForecast</code> of the given <code>ComponentSelector</code></p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/NREL-Sienna/PowerAnalytics.jl/blob/be0af0fa2b26dbe579f7d4a6ddd6ad8184276435/src/builtin_metrics.jl#L205">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="PowerAnalytics.Metrics.calc_discharge_cycles" href="#PowerAnalytics.Metrics.calc_discharge_cycles"><code>PowerAnalytics.Metrics.calc_discharge_cycles</code></a> — <span class="docstring-category">Constant</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><p>Calculate the number of discharge cycles a storage device has gone through in the time period</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/NREL-Sienna/PowerAnalytics.jl/blob/be0af0fa2b26dbe579f7d4a6ddd6ad8184276435/src/builtin_metrics.jl#L320">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="PowerAnalytics.Metrics.calc_integration" href="#PowerAnalytics.Metrics.calc_integration"><code>PowerAnalytics.Metrics.calc_integration</code></a> — <span class="docstring-category">Constant</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><p>Calculate the <code>ActivePower</code> of the given <code>ComponentSelector</code> over the sum of the <code>SystemLoadForecast</code> and the <code>SystemLoadFromStorage</code></p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/NREL-Sienna/PowerAnalytics.jl/blob/be0af0fa2b26dbe579f7d4a6ddd6ad8184276435/src/builtin_metrics.jl#L229">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="PowerAnalytics.Metrics.calc_is_slack_up" href="#PowerAnalytics.Metrics.calc_is_slack_up"><code>PowerAnalytics.Metrics.calc_is_slack_up</code></a> — <span class="docstring-category">Constant</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><p>Calculate whether the given time period has system balance slack up of magnitude greater than 0.0001</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/NREL-Sienna/PowerAnalytics.jl/blob/be0af0fa2b26dbe579f7d4a6ddd6ad8184276435/src/builtin_metrics.jl#L360">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="PowerAnalytics.Metrics.calc_load_forecast" href="#PowerAnalytics.Metrics.calc_load_forecast"><code>PowerAnalytics.Metrics.calc_load_forecast</code></a> — <span class="docstring-category">Constant</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><p>Fetch the forecast active load of the specified <code>ComponentSelector</code></p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/NREL-Sienna/PowerAnalytics.jl/blob/be0af0fa2b26dbe579f7d4a6ddd6ad8184276435/src/builtin_metrics.jl#L159">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="PowerAnalytics.Metrics.calc_load_from_storage" href="#PowerAnalytics.Metrics.calc_load_from_storage"><code>PowerAnalytics.Metrics.calc_load_from_storage</code></a> — <span class="docstring-category">Constant</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><p>Calculate the <code>ActivePowerIn</code> minus the <code>ActivePowerOut</code> of the specified (storage) <code>ComponentSelector</code></p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/NREL-Sienna/PowerAnalytics.jl/blob/be0af0fa2b26dbe579f7d4a6ddd6ad8184276435/src/builtin_metrics.jl#L147">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="PowerAnalytics.Metrics.calc_net_load_forecast" href="#PowerAnalytics.Metrics.calc_net_load_forecast"><code>PowerAnalytics.Metrics.calc_net_load_forecast</code></a> — <span class="docstring-category">Constant</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><p><code>SystemLoadForecast</code> minus <code>ActivePowerForecast</code> of the given <code>ComponentSelector</code></p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/NREL-Sienna/PowerAnalytics.jl/blob/be0af0fa2b26dbe579f7d4a6ddd6ad8184276435/src/builtin_metrics.jl#L191">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="PowerAnalytics.Metrics.calc_production_cost" href="#PowerAnalytics.Metrics.calc_production_cost"><code>PowerAnalytics.Metrics.calc_production_cost</code></a> — <span class="docstring-category">Constant</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><p>Calculate the active power output of the specified <code>ComponentSelector</code></p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/NREL-Sienna/PowerAnalytics.jl/blob/be0af0fa2b26dbe579f7d4a6ddd6ad8184276435/src/builtin_metrics.jl#L123">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="PowerAnalytics.Metrics.calc_shutdown_cost" href="#PowerAnalytics.Metrics.calc_shutdown_cost"><code>PowerAnalytics.Metrics.calc_shutdown_cost</code></a> — <span class="docstring-category">Constant</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><p>Calculate the shutdown cost of the specified <code>ComponentSelector</code></p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/NREL-Sienna/PowerAnalytics.jl/blob/be0af0fa2b26dbe579f7d4a6ddd6ad8184276435/src/builtin_metrics.jl#L285">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="PowerAnalytics.Metrics.calc_startup_cost" href="#PowerAnalytics.Metrics.calc_startup_cost"><code>PowerAnalytics.Metrics.calc_startup_cost</code></a> — <span class="docstring-category">Constant</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><p>Calculate the startup cost of the specified <code>ComponentSelector</code></p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/NREL-Sienna/PowerAnalytics.jl/blob/be0af0fa2b26dbe579f7d4a6ddd6ad8184276435/src/builtin_metrics.jl#L272">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="PowerAnalytics.Metrics.calc_stored_energy" href="#PowerAnalytics.Metrics.calc_stored_energy"><code>PowerAnalytics.Metrics.calc_stored_energy</code></a> — <span class="docstring-category">Constant</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><p>Calculate the energy stored in the specified (storage) <code>ComponentSelector</code></p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/NREL-Sienna/PowerAnalytics.jl/blob/be0af0fa2b26dbe579f7d4a6ddd6ad8184276435/src/builtin_metrics.jl#L141">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="PowerAnalytics.Metrics.calc_sum_bytes_alloc" href="#PowerAnalytics.Metrics.calc_sum_bytes_alloc"><code>PowerAnalytics.Metrics.calc_sum_bytes_alloc</code></a> — <span class="docstring-category">Constant</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><p>Sum the bytes allocated to the optimization problems</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/NREL-Sienna/PowerAnalytics.jl/blob/be0af0fa2b26dbe579f7d4a6ddd6ad8184276435/src/builtin_metrics.jl#L381">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="PowerAnalytics.Metrics.calc_sum_objective_value" href="#PowerAnalytics.Metrics.calc_sum_objective_value"><code>PowerAnalytics.Metrics.calc_sum_objective_value</code></a> — <span class="docstring-category">Constant</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><p>Sum the objective values achieved in the optimization problems</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/NREL-Sienna/PowerAnalytics.jl/blob/be0af0fa2b26dbe579f7d4a6ddd6ad8184276435/src/builtin_metrics.jl#L371">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="PowerAnalytics.Metrics.calc_sum_solve_time" href="#PowerAnalytics.Metrics.calc_sum_solve_time"><code>PowerAnalytics.Metrics.calc_sum_solve_time</code></a> — <span class="docstring-category">Constant</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><p>Sum the solve times taken by the optimization problems</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/NREL-Sienna/PowerAnalytics.jl/blob/be0af0fa2b26dbe579f7d4a6ddd6ad8184276435/src/builtin_metrics.jl#L376">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="PowerAnalytics.Metrics.calc_system_load_forecast" href="#PowerAnalytics.Metrics.calc_system_load_forecast"><code>PowerAnalytics.Metrics.calc_system_load_forecast</code></a> — <span class="docstring-category">Constant</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><p>Fetch the forecast active load of all the <a href="https://nrel-sienna.github.io/PowerSystems.jl/stable/api/public/#PowerSystems.ElectricLoad"><code>ElectricLoad</code></a> <a href="https://nrel-sienna.github.io/PowerSystems.jl/stable/api/public/#PowerSystems.Component"><code>Component</code></a>s in the system</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/NREL-Sienna/PowerAnalytics.jl/blob/be0af0fa2b26dbe579f7d4a6ddd6ad8184276435/src/builtin_metrics.jl#L171">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="PowerAnalytics.Metrics.calc_system_load_from_storage" href="#PowerAnalytics.Metrics.calc_system_load_from_storage"><code>PowerAnalytics.Metrics.calc_system_load_from_storage</code></a> — <span class="docstring-category">Constant</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><p>Fetch the <code>LoadFromStorage</code> of all storage in the system</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/NREL-Sienna/PowerAnalytics.jl/blob/be0af0fa2b26dbe579f7d4a6ddd6ad8184276435/src/builtin_metrics.jl#L179">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="PowerAnalytics.Metrics.calc_system_slack_up" href="#PowerAnalytics.Metrics.calc_system_slack_up"><code>PowerAnalytics.Metrics.calc_system_slack_up</code></a> — <span class="docstring-category">Constant</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><p>Calculate the system balance slack up</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/NREL-Sienna/PowerAnalytics.jl/blob/be0af0fa2b26dbe579f7d4a6ddd6ad8184276435/src/builtin_metrics.jl#L338">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="PowerAnalytics.Metrics.calc_total_cost" href="#PowerAnalytics.Metrics.calc_total_cost"><code>PowerAnalytics.Metrics.calc_total_cost</code></a> — <span class="docstring-category">Constant</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><p>Calculate the production cost of the specified <code>ComponentSelector</code>, plus the startup and shutdown costs if they are defined</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/NREL-Sienna/PowerAnalytics.jl/blob/be0af0fa2b26dbe579f7d4a6ddd6ad8184276435/src/builtin_metrics.jl#L305">source</a></section></article><h2 id="Built-in-Selectors"><a class="docs-heading-anchor" href="#Built-in-Selectors">Built-in Selectors</a><a id="Built-in-Selectors-1"></a><a class="docs-heading-anchor-permalink" href="#Built-in-Selectors" title="Permalink"></a></h2><h3 id="Selector-Utilities"><a class="docs-heading-anchor" href="#Selector-Utilities">Selector Utilities</a><a id="Selector-Utilities-1"></a><a class="docs-heading-anchor-permalink" href="#Selector-Utilities" title="Permalink"></a></h3><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="PowerAnalytics.parse_generator_categories" href="#PowerAnalytics.parse_generator_categories"><code>PowerAnalytics.parse_generator_categories</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">parse_generator_categories(
    filename;
    root_type
) -&gt; Union{Nothing, Dict{String, ComponentSelector}}
</code></pre><p>Use <a href="#PowerAnalytics.parse_generator_mapping_file"><code>parse_generator_mapping_file</code></a> to parse a <code>generator_mapping.yaml</code> file into a dictionary of <code>ComponentSelector</code>s, excluding categories in the &#39;non_generators&#39; list in metadata.</p><p><strong>Arguments</strong></p><ul><li><code>filename</code>: the path to the <code>generator_mapping.yaml</code> file</li><li><code>root_type::Type{&lt;:Component} = PSY.StaticInjection</code>: the <a href="https://nrel-sienna.github.io/PowerSystems.jl/stable/api/public/#PowerSystems.Component"><code>Component</code></a> type assumed in cases where there is no more precise information</li></ul><p>See also: <a href="#PowerAnalytics.parse_injector_categories"><code>parse_injector_categories</code></a> if all injectors are desired</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/NREL-Sienna/PowerAnalytics.jl/blob/be0af0fa2b26dbe579f7d4a6ddd6ad8184276435/src/builtin_component_selectors.jl#L124">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="PowerAnalytics.parse_generator_mapping_file" href="#PowerAnalytics.parse_generator_mapping_file"><code>PowerAnalytics.parse_generator_mapping_file</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">parse_generator_mapping_file(
    filename;
    root_type
) -&gt; Tuple{Dict{String, ComponentSelector}, Any}
</code></pre><p>Parse a <code>generator_mapping.yaml</code> file into a dictionary of <code>ComponentSelector</code>s and a dictionary of metadata if present.</p><p><strong>Arguments</strong></p><ul><li><code>filename</code>: the path to the <code>generator_mapping.yaml</code> file</li><li><code>root_type::Type{&lt;:Component} = PSY.StaticInjection</code>: the <a href="https://nrel-sienna.github.io/PowerSystems.jl/stable/api/public/#PowerSystems.Component"><code>Component</code></a> type assumed in cases where there is no more precise information</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/NREL-Sienna/PowerAnalytics.jl/blob/be0af0fa2b26dbe579f7d4a6ddd6ad8184276435/src/builtin_component_selectors.jl#L78">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="PowerAnalytics.parse_injector_categories" href="#PowerAnalytics.parse_injector_categories"><code>PowerAnalytics.parse_injector_categories</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">parse_injector_categories(
    filename;
    root_type
) -&gt; Dict{String, ComponentSelector}
</code></pre><p>Use <a href="#PowerAnalytics.parse_generator_mapping_file"><code>parse_generator_mapping_file</code></a> to parse a <code>generator_mapping.yaml</code> file into a dictionary of all <code>ComponentSelector</code>s.</p><p><strong>Arguments</strong></p><ul><li><code>filename</code>: the path to the <code>generator_mapping.yaml</code> file</li><li><code>root_type::Type{&lt;:Component} = PSY.StaticInjection</code>: the <a href="https://nrel-sienna.github.io/PowerSystems.jl/stable/api/public/#PowerSystems.Component"><code>Component</code></a> type assumed in cases where there is no more precise information</li></ul><p>See also: <a href="#PowerAnalytics.parse_generator_categories"><code>parse_generator_categories</code></a> if only generators are desired</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/NREL-Sienna/PowerAnalytics.jl/blob/be0af0fa2b26dbe579f7d4a6ddd6ad8184276435/src/builtin_component_selectors.jl#L109">source</a></section></article><h3 id="Selectors-Submodule"><a class="docs-heading-anchor" href="#Selectors-Submodule"><code>Selectors</code> Submodule</a><a id="Selectors-Submodule-1"></a><a class="docs-heading-anchor-permalink" href="#Selectors-Submodule" title="Permalink"></a></h3><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="PowerAnalytics.Selectors" href="#PowerAnalytics.Selectors"><code>PowerAnalytics.Selectors</code></a> — <span class="docstring-category">Module</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><p>PowerAnalytics built-in <code>ComponentSelector</code>s. Use <code>names</code> to list what is available.</p><p><strong>Examples</strong></p><pre><code class="language-julia hljs">using PowerAnalytics
names(PowerAnalytics.Selectors)  # lists built-in selectors
PowerAnalytics.Selectors.all_loads  # by default, must prefix built-in selectors with the module name
@isdefined all_loads  # -&gt; false
using PowerAnalytics.Selectors
@isdefined all_loads  # -&gt; true, can now refer to built-in selectors without the prefix</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/NREL-Sienna/PowerAnalytics.jl/blob/be0af0fa2b26dbe579f7d4a6ddd6ad8184276435/src/builtin_component_selectors.jl#L145">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="PowerAnalytics.Selectors.all_loads" href="#PowerAnalytics.Selectors.all_loads"><code>PowerAnalytics.Selectors.all_loads</code></a> — <span class="docstring-category">Constant</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><p>A <code>ComponentSelector</code> representing all the electric load in a <a href="https://nrel-sienna.github.io/PowerSystems.jl/stable/api/public/#PowerSystems.System"><code>System</code></a></p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/NREL-Sienna/PowerAnalytics.jl/blob/be0af0fa2b26dbe579f7d4a6ddd6ad8184276435/src/builtin_component_selectors.jl#L176">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="PowerAnalytics.Selectors.all_storage" href="#PowerAnalytics.Selectors.all_storage"><code>PowerAnalytics.Selectors.all_storage</code></a> — <span class="docstring-category">Constant</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><p>A <code>ComponentSelector</code> representing all the storage in a <a href="https://nrel-sienna.github.io/PowerSystems.jl/stable/api/public/#PowerSystems.System"><code>System</code></a></p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/NREL-Sienna/PowerAnalytics.jl/blob/be0af0fa2b26dbe579f7d4a6ddd6ad8184276435/src/builtin_component_selectors.jl#L179">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="PowerAnalytics.Selectors.categorized_generators" href="#PowerAnalytics.Selectors.categorized_generators"><code>PowerAnalytics.Selectors.categorized_generators</code></a> — <span class="docstring-category">Constant</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><p>A single <code>ComponentSelector</code> representing the generators in a <a href="https://nrel-sienna.github.io/PowerSystems.jl/stable/api/public/#PowerSystems.System"><code>System</code></a> (no storage or load) grouped by the categories in <code>generator_mapping.yaml</code></p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/NREL-Sienna/PowerAnalytics.jl/blob/be0af0fa2b26dbe579f7d4a6ddd6ad8184276435/src/builtin_component_selectors.jl#L207-L211">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="PowerAnalytics.Selectors.categorized_injectors" href="#PowerAnalytics.Selectors.categorized_injectors"><code>PowerAnalytics.Selectors.categorized_injectors</code></a> — <span class="docstring-category">Constant</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><p>A single <code>ComponentSelector</code> representing the static injectors in a <a href="https://nrel-sienna.github.io/PowerSystems.jl/stable/api/public/#PowerSystems.System"><code>System</code></a> grouped by the categories in <code>generator_mapping.yaml</code></p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/NREL-Sienna/PowerAnalytics.jl/blob/be0af0fa2b26dbe579f7d4a6ddd6ad8184276435/src/builtin_component_selectors.jl#L200-L203">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="PowerAnalytics.Selectors.generator_categories" href="#PowerAnalytics.Selectors.generator_categories"><code>PowerAnalytics.Selectors.generator_categories</code></a> — <span class="docstring-category">Constant</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><p>A dictionary of <code>ComponentSelector</code>s, each of which corresponds to one of the categories in <code>generator_mapping.yaml</code>, only considering the components and categories that represent generators (no storage or load)</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/NREL-Sienna/PowerAnalytics.jl/blob/be0af0fa2b26dbe579f7d4a6ddd6ad8184276435/src/builtin_component_selectors.jl#L189-L193">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="PowerAnalytics.Selectors.injector_categories" href="#PowerAnalytics.Selectors.injector_categories"><code>PowerAnalytics.Selectors.injector_categories</code></a> — <span class="docstring-category">Constant</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><p>A dictionary of <code>ComponentSelector</code>s, each of which corresponds to one of the static injector categories in <code>generator_mapping.yaml</code></p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/NREL-Sienna/PowerAnalytics.jl/blob/be0af0fa2b26dbe579f7d4a6ddd6ad8184276435/src/builtin_component_selectors.jl#L182-L185">source</a></section></article><h2 id="Post-Metric-Utilities"><a class="docs-heading-anchor" href="#Post-Metric-Utilities">Post-Metric Utilities</a><a id="Post-Metric-Utilities-1"></a><a class="docs-heading-anchor-permalink" href="#Post-Metric-Utilities" title="Permalink"></a></h2><p>Post-processing on the specially formatted <code>DataFrame</code>s that <a href="#PowerAnalytics.Metric"><code>Metric</code></a>s produce.</p><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="PowerAnalytics.aggregate_time" href="#PowerAnalytics.aggregate_time"><code>PowerAnalytics.aggregate_time</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">aggregate_time(
    df::DataFrames.AbstractDataFrame;
    groupby_fn,
    groupby_col,
    agg_fn
) -&gt; Any
</code></pre><p>Given a <code>DataFrame</code> like that produced by a <a href="#PowerAnalytics.TimedMetric"><code>TimedMetric</code></a> or the timed version of <a href="#PowerAnalytics.compute_all"><code>compute_all</code></a>, group by a function of the time axis, apply a reduction, and report the resulting aggregation indexed by the first timestamp in each group.</p><p><strong>Arguments</strong></p><ul><li><code>df::DataFrames.AbstractDataFrame</code>: the DataFrame to operate upon</li><li><code>groupby_fn = nothing</code>: a function that can be passed a <code>DateTime</code>; two rows will be in the same group if their timestamps produce the same result under <code>groupby_fn</code>. Note that <code>groupby_fn = month</code> puts January 2024 and January 2025 into the same group whereas <code>groupby_fn = (x -&gt; (year(x), month(x)))</code> does not. Passing <code>nothing</code> groups all rows in the <code>DataFrame</code> together.</li><li><code>groupby_col::Union{Nothing, AbstractString, Symbol} = nothing</code>: specify a column name to report the result of <code>groupby_fn</code> in the output DataFrame, or <code>nothing</code> to not</li><li><code>agg_fn = nothing</code>: by default, the aggregation function (<a href="https://docs.julialang.org/en/v1/base/collections/#Base.sum"><code>sum</code></a>/<a href="https://docs.julialang.org/en/v1/stdlib/Statistics/#Statistics.mean"><code>mean</code></a>/etc.) is specified by the <a href="#PowerAnalytics.Metric"><code>Metric</code></a>, which is read from the metadata of each column. If this metadata isn&#39;t found, one can specify a default aggregation function like <a href="https://docs.julialang.org/en/v1/base/collections/#Base.sum"><code>sum</code></a> here; if nothing, an error will be thrown.</li></ul><p><strong>Examples</strong></p><pre><code class="language-julia hljs">using Dates
using PowerAnalytics.Metrics
# Setup: create a `DataFrame` to work with
my_computations = [
    (calc_active_power, make_selector(ThermalStandard; groupby = :all), &quot;thermal_power&quot;),
    (calc_curtailment, make_selector(RenewableDispatch; groupby = :all), &quot;renewable_curtailment&quot;)
]
my_8760 = compute_all(results, my_computations...)
# Now (given a certain simulation setup) `my_8760` is an 8760x3 DataFrame
# with columns `DateTime`, `thermal_power`, and `renewable_curtailment`

# Aggregate across the entire time period; result is 1x3:
aggregate_time(my_8760)

# Aggregate all January results together, all February results together, etc.; result is 12x3:
aggregate_time(my_8760; groupby_fn = Dates.month)

# Same as above but create a column &#39;month_n&#39; with 1 for January, 2 for February, etc.; result is 12x4:
aggregate_time(my_8760; groupby_fn = Dates.month, groupby_col = &quot;month_n&quot;)

# Custom `groupby_fn`: put all weekday timestamps together and all weekend timestamps together; result is 2x4:
aggregate_time(my_8760; groupby_fn = x -&gt; (Dates.dayofweek(x) in [6, 7]) ? &quot;weekend&quot; : &quot;weekday&quot;, groupby_col = &quot;day_type&quot;)</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/NREL-Sienna/PowerAnalytics.jl/blob/be0af0fa2b26dbe579f7d4a6ddd6ad8184276435/src/output_utils.jl#L166">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="PowerAnalytics.hcat_timed_dfs" href="#PowerAnalytics.hcat_timed_dfs"><code>PowerAnalytics.hcat_timed_dfs</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">hcat_timed_dfs(vals::DataFrames.DataFrame...) -&gt; Any
</code></pre><p>If the time axes match across all the <code>DataFrames</code>, horizontally concatenate them and remove the duplicate time axes. If not, throw an error.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/NREL-Sienna/PowerAnalytics.jl/blob/be0af0fa2b26dbe579f7d4a6ddd6ad8184276435/src/output_utils.jl#L118">source</a></section></article><h2 id="Post-Metric-Accessors"><a class="docs-heading-anchor" href="#Post-Metric-Accessors">Post-Metric Accessors</a><a id="Post-Metric-Accessors-1"></a><a class="docs-heading-anchor-permalink" href="#Post-Metric-Accessors" title="Permalink"></a></h2><p>Extract and manipulate information from the specially formatted <code>DataFrame</code>s that <a href="#PowerAnalytics.Metric"><code>Metric</code></a>s produce.</p><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="PowerAnalytics.get_agg_meta-Tuple{Any, Any}" href="#PowerAnalytics.get_agg_meta-Tuple{Any, Any}"><code>PowerAnalytics.get_agg_meta</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">get_agg_meta(df, colname) -&gt; Any
</code></pre><p>Get the column&#39;s aggregation metadata; return <code>nothing</code> if there is none.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/NREL-Sienna/PowerAnalytics.jl/blob/be0af0fa2b26dbe579f7d4a6ddd6ad8184276435/src/output_utils.jl#L24">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="PowerAnalytics.get_agg_meta-Tuple{Any}" href="#PowerAnalytics.get_agg_meta-Tuple{Any}"><code>PowerAnalytics.get_agg_meta</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">get_agg_meta(df) -&gt; Any
</code></pre><p>Get the single data column&#39;s aggregation metadata; error on multiple data columns.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/NREL-Sienna/PowerAnalytics.jl/blob/be0af0fa2b26dbe579f7d4a6ddd6ad8184276435/src/output_utils.jl#L27">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="PowerAnalytics.get_data_cols-Tuple{DataFrames.AbstractDataFrame}" href="#PowerAnalytics.get_data_cols-Tuple{DataFrames.AbstractDataFrame}"><code>PowerAnalytics.get_data_cols</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">get_data_cols(
    df::DataFrames.AbstractDataFrame
) -&gt; Vector{String}
</code></pre><p>Select the names of the data columns of the <code>DataFrame</code>, i.e., those that are not <code>DateTime</code> and not metadata.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/NREL-Sienna/PowerAnalytics.jl/blob/be0af0fa2b26dbe579f7d4a6ddd6ad8184276435/src/output_utils.jl#L61">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="PowerAnalytics.get_data_df-Tuple{DataFrames.AbstractDataFrame}" href="#PowerAnalytics.get_data_df-Tuple{DataFrames.AbstractDataFrame}"><code>PowerAnalytics.get_data_df</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">get_data_df(df::DataFrames.AbstractDataFrame) -&gt; Any
</code></pre><p>Select the data columns of the <code>DataFrame</code> as a <code>DataFrame</code> without copying.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/NREL-Sienna/PowerAnalytics.jl/blob/be0af0fa2b26dbe579f7d4a6ddd6ad8184276435/src/output_utils.jl#L74">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="PowerAnalytics.get_data_mat-Tuple{DataFrames.AbstractDataFrame}" href="#PowerAnalytics.get_data_mat-Tuple{DataFrames.AbstractDataFrame}"><code>PowerAnalytics.get_data_mat</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">get_data_mat(df::DataFrames.AbstractDataFrame) -&gt; Any
</code></pre><p>Select the data columns of the <code>DataFrame</code> as a <code>Matrix</code> with copying.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/NREL-Sienna/PowerAnalytics.jl/blob/be0af0fa2b26dbe579f7d4a6ddd6ad8184276435/src/output_utils.jl#L89">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="PowerAnalytics.get_data_vec-Tuple{DataFrames.AbstractDataFrame}" href="#PowerAnalytics.get_data_vec-Tuple{DataFrames.AbstractDataFrame}"><code>PowerAnalytics.get_data_vec</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">get_data_vec(df::DataFrames.AbstractDataFrame) -&gt; Any
</code></pre><p>Select the data column of the <code>DataFrame</code> as a vector without copying, errors if more than one.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/NREL-Sienna/PowerAnalytics.jl/blob/be0af0fa2b26dbe579f7d4a6ddd6ad8184276435/src/output_utils.jl#L78">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="PowerAnalytics.get_time_df-Tuple{DataFrames.AbstractDataFrame}" href="#PowerAnalytics.get_time_df-Tuple{DataFrames.AbstractDataFrame}"><code>PowerAnalytics.get_time_df</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">get_time_df(df::DataFrames.AbstractDataFrame) -&gt; Any
</code></pre><p>Select the <code>DateTime</code> column of the <code>DataFrame</code> as a one-column <code>DataFrame</code> without copying.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/NREL-Sienna/PowerAnalytics.jl/blob/be0af0fa2b26dbe579f7d4a6ddd6ad8184276435/src/output_utils.jl#L54">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="PowerAnalytics.get_time_vec-Tuple{DataFrames.AbstractDataFrame}" href="#PowerAnalytics.get_time_vec-Tuple{DataFrames.AbstractDataFrame}"><code>PowerAnalytics.get_time_vec</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">get_time_vec(df::DataFrames.AbstractDataFrame) -&gt; Any
</code></pre><p>Select the <code>DateTime</code> column of the <code>DataFrame</code> as a <code>Vector</code> without copying.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/NREL-Sienna/PowerAnalytics.jl/blob/be0af0fa2b26dbe579f7d4a6ddd6ad8184276435/src/output_utils.jl#L58">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="PowerAnalytics.is_col_meta-Tuple{Any, Any}" href="#PowerAnalytics.is_col_meta-Tuple{Any, Any}"><code>PowerAnalytics.is_col_meta</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">is_col_meta(df, colname) -&gt; Any
</code></pre><p>Check whether a column is metadata.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/NREL-Sienna/PowerAnalytics.jl/blob/be0af0fa2b26dbe579f7d4a6ddd6ad8184276435/src/output_utils.jl#L17">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="PowerAnalytics.set_agg_meta!-Tuple{Any, Any, Any}" href="#PowerAnalytics.set_agg_meta!-Tuple{Any, Any, Any}"><code>PowerAnalytics.set_agg_meta!</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">set_agg_meta!(
    df,
    colname,
    val
) -&gt; Union{DataFrames.DataFrame, DataFrames.DataFrameColumns, DataFrames.DataFrameRow, DataFrames.DataFrameRows, DataFrames.SubDataFrame}
</code></pre><p>Set the column&#39;s aggregation metadata.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/NREL-Sienna/PowerAnalytics.jl/blob/be0af0fa2b26dbe579f7d4a6ddd6ad8184276435/src/output_utils.jl#L38">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="PowerAnalytics.set_agg_meta!-Tuple{Any, Any}" href="#PowerAnalytics.set_agg_meta!-Tuple{Any, Any}"><code>PowerAnalytics.set_agg_meta!</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">set_agg_meta!(
    df,
    val
) -&gt; Union{DataFrames.DataFrame, DataFrames.DataFrameColumns, DataFrames.DataFrameRow, DataFrames.DataFrameRows, DataFrames.SubDataFrame}
</code></pre><p>Set the single data column&#39;s aggregation metadata; error on multiple data columns.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/NREL-Sienna/PowerAnalytics.jl/blob/be0af0fa2b26dbe579f7d4a6ddd6ad8184276435/src/output_utils.jl#L42">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="PowerAnalytics.set_col_meta!" href="#PowerAnalytics.set_col_meta!"><code>PowerAnalytics.set_col_meta!</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">set_col_meta!(
    df,
    colname
) -&gt; Union{DataFrames.DataFrame, DataFrames.DataFrameColumns, DataFrames.DataFrameRow, DataFrames.DataFrameRows, DataFrames.SubDataFrame}
set_col_meta!(
    df,
    colname,
    val
) -&gt; Union{DataFrames.DataFrame, DataFrames.DataFrameColumns, DataFrames.DataFrameRow, DataFrames.DataFrameRows, DataFrames.SubDataFrame}
</code></pre><p>Mark a column as metadata.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/NREL-Sienna/PowerAnalytics.jl/blob/be0af0fa2b26dbe579f7d4a6ddd6ad8184276435/src/output_utils.jl#L20">source</a></section></article><h2 id="Advanced-Metrics-Interface"><a class="docs-heading-anchor" href="#Advanced-Metrics-Interface">Advanced Metrics Interface</a><a id="Advanced-Metrics-Interface-1"></a><a class="docs-heading-anchor-permalink" href="#Advanced-Metrics-Interface" title="Permalink"></a></h2><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="PowerAnalytics.ComponentSelectorTimedMetric" href="#PowerAnalytics.ComponentSelectorTimedMetric"><code>PowerAnalytics.ComponentSelectorTimedMetric</code></a> — <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><p><a href="#PowerAnalytics.TimedMetric"><code>TimedMetric</code></a>s defined in terms of a <code>ComponentSelector</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/NREL-Sienna/PowerAnalytics.jl/blob/be0af0fa2b26dbe579f7d4a6ddd6ad8184276435/src/metrics.jl#L44">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="PowerAnalytics.ComponentTimedMetric" href="#PowerAnalytics.ComponentTimedMetric"><code>PowerAnalytics.ComponentTimedMetric</code></a> — <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">ComponentTimedMetric(name::String, eval_fn::Function, component_agg_fn::Function, time_agg_fn::Function, component_meta_agg_fn::Function, time_meta_agg_fn::Function, eval_zero::Union{Nothing, Function})
ComponentTimedMetric(; name, eval_fn, component_agg_fn, time_agg_fn, component_meta_agg_fn, time_meta_agg_fn, eval_zero)</code></pre><p>A <a href="#PowerAnalytics.ComponentSelectorTimedMetric"><code>ComponentSelectorTimedMetric</code></a> implemented by evaluating a function on each <a href="https://nrel-sienna.github.io/PowerSystems.jl/stable/api/public/#PowerSystems.Component"><code>Component</code></a>.</p><p><strong>Arguments</strong></p><ul><li><code>name::String</code>: the name of the <code>Metric</code></li><li><code>eval_fn</code>: a function with signature <code>(::IS.Results, ::Component; start_time::Union{Nothing, DateTime}, len::Union{Int, Nothing})</code> that returns a <code>DataFrame</code> representing the results for that <code>Component</code></li><li><code>component_agg_fn</code>: optional, a function to aggregate results between <a href="https://nrel-sienna.github.io/PowerSystems.jl/stable/api/public/#PowerSystems.Component"><code>Component</code></a>s/<code>ComponentSelector</code>s, defaults to <a href="https://docs.julialang.org/en/v1/base/collections/#Base.sum"><code>sum</code></a></li><li><code>time_agg_fn</code>: optional, a function to aggregate results across time, defaults to <a href="https://docs.julialang.org/en/v1/base/collections/#Base.sum"><code>sum</code></a></li><li><code>component_meta_agg_fn</code>: optional, a function to aggregate metadata across components, defaults to <a href="https://docs.julialang.org/en/v1/base/collections/#Base.sum"><code>sum</code></a></li><li><code>time_meta_agg_fn</code>: optional, a function to aggregate metadata across time, defaults to <a href="https://docs.julialang.org/en/v1/base/collections/#Base.sum"><code>sum</code></a></li><li><code>eval_zero</code>: optional and rarely filled in, specifies what to do in the case where there are no components to contribute to a particular group; defaults to <code>nothing</code>, in which case the data is filled in from the identity element of <code>component_agg_fn</code></li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/NREL-Sienna/PowerAnalytics.jl/blob/be0af0fa2b26dbe579f7d4a6ddd6ad8184276435/src/metrics.jl#L50">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="PowerAnalytics.CustomTimedMetric" href="#PowerAnalytics.CustomTimedMetric"><code>PowerAnalytics.CustomTimedMetric</code></a> — <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">CustomTimedMetric(name::String, eval_fn::Function, time_agg_fn::Function, time_meta_agg_fn::Function)
CustomTimedMetric(; name, eval_fn, time_agg_fn, time_meta_agg_fn)</code></pre><p>A <a href="#PowerAnalytics.ComponentSelectorTimedMetric"><code>ComponentSelectorTimedMetric</code></a> implemented without drilling down to the base <a href="https://nrel-sienna.github.io/PowerSystems.jl/stable/api/public/#PowerSystems.Component"><code>Component</code></a>s, just calls the <code>eval_fn</code> directly on the <code>ComponentSelector</code>.</p><p><strong>Arguments</strong></p><ul><li><code>name::String</code>: the name of the <code>Metric</code></li><li><code>eval_fn</code>: a function with signature <code>(::IS.Results, ::Union{ComponentSelector, Component}; start_time::Union{Nothing, DateTime}, len::Union{Int, Nothing})</code> that returns a <code>DataFrame</code> representing the results for that <code>Component</code></li><li><code>time_agg_fn</code>: optional, a function to aggregate results across time, defaults to <a href="https://docs.julialang.org/en/v1/base/collections/#Base.sum"><code>sum</code></a></li><li><code>time_meta_agg_fn</code>: optional, a function to aggregate metadata across time, defaults to <a href="https://docs.julialang.org/en/v1/base/collections/#Base.sum"><code>sum</code></a></li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/NREL-Sienna/PowerAnalytics.jl/blob/be0af0fa2b26dbe579f7d4a6ddd6ad8184276435/src/metrics.jl#L88">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="PowerAnalytics.ResultsTimelessMetric" href="#PowerAnalytics.ResultsTimelessMetric"><code>PowerAnalytics.ResultsTimelessMetric</code></a> — <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">ResultsTimelessMetric(name::String, eval_fn::Function)
ResultsTimelessMetric(; name, eval_fn)</code></pre><p>A <a href="#PowerAnalytics.TimelessMetric"><code>TimelessMetric</code></a> with a single value per <code>IS.Results</code> instance.</p><p><strong>Arguments</strong></p><ul><li><code>name::String</code>: the name of the <code>Metric</code></li><li><code>eval_fn</code>: a function with signature <code>(::IS.Results,)</code> that returns a <code>DataFrame</code> representing the results</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/NREL-Sienna/PowerAnalytics.jl/blob/be0af0fa2b26dbe579f7d4a6ddd6ad8184276435/src/metrics.jl#L138">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="PowerAnalytics.SystemTimedMetric" href="#PowerAnalytics.SystemTimedMetric"><code>PowerAnalytics.SystemTimedMetric</code></a> — <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">SystemTimedMetric(name::String, eval_fn::Function, time_agg_fn::Function, time_meta_agg_fn::Function)
SystemTimedMetric(; name, eval_fn, time_agg_fn, time_meta_agg_fn)</code></pre><p>A <a href="#PowerAnalytics.TimedMetric"><code>TimedMetric</code></a> that calculates an output for an entire <a href="https://nrel-sienna.github.io/PowerSystems.jl/stable/api/public/#PowerSystems.System"><code>System</code></a> embedded in a set of results.</p><p><strong>Arguments</strong></p><ul><li><code>name::String</code>: the name of the <code>Metric</code></li><li><code>eval_fn</code>: a function with signature <code>(::IS.Results; start_time::Union{Nothing, DateTime}, len::Union{Int, Nothing})</code> that returns a <code>DataFrame</code> representing the results</li><li><code>time_agg_fn</code>: optional, a function to aggregate results across time, defaults to <a href="https://docs.julialang.org/en/v1/base/collections/#Base.sum"><code>sum</code></a></li><li><code>time_meta_agg_fn</code>: optional, a function to aggregate metadata across time, defaults to <a href="https://docs.julialang.org/en/v1/base/collections/#Base.sum"><code>sum</code></a></li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/NREL-Sienna/PowerAnalytics.jl/blob/be0af0fa2b26dbe579f7d4a6ddd6ad8184276435/src/metrics.jl#L114">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="PowerAnalytics.rebuild_metric" href="#PowerAnalytics.rebuild_metric"><code>PowerAnalytics.rebuild_metric</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">rebuild_metric(metric::Metric; kwargs...) -&gt; Any
</code></pre><p>Returns a new <a href="#PowerAnalytics.Metric"><code>Metric</code></a> identical to the input <code>metric</code> except with the changes to its fields specified in the keyword arguments. See the <code>Metric</code> constructors (e.g., <a href="#PowerAnalytics.ComponentTimedMetric"><code>ComponentTimedMetric</code></a>) for available fields to alter.</p><p><strong>Examples</strong></p><p>Make a variant of <a href="#PowerAnalytics.Metrics.calc_active_power"><code>calc_active_power</code></a> that averages across components rather than summing:</p><pre><code class="language-julia hljs">using PowerAnalytics.Metrics
const calc_active_power_mean = rebuild_metric(calc_active_power; component_agg_fn = mean)
# Now calc_active_power_mean works as a standalone, callable metric:
calc_active_power_mean(make_selector(RenewableDispatch), results)</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/NREL-Sienna/PowerAnalytics.jl/blob/be0af0fa2b26dbe579f7d4a6ddd6ad8184276435/src/metrics.jl#L174">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="PowerAnalytics.compose_metrics" href="#PowerAnalytics.compose_metrics"><code>PowerAnalytics.compose_metrics</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><p>Given a list of metrics and a function that applies to their results to produce one result, create a new metric that computes the sub-metrics and applies the function to produce its own result.</p><p><strong>Arguments</strong></p><ul><li><code>name::String</code>: the name of the new <a href="#PowerAnalytics.Metric"><code>Metric</code></a></li><li><code>reduce_fn</code>: a function that takes one value from each of the input <code>Metric</code>s and returns a single value that will be the result of this <code>Metric</code>. &quot;Value&quot; means a vector (not a <code>DataFrame</code>) in the case of <a href="#PowerAnalytics.TimedMetric"><code>TimedMetric</code></a>s and a scalar for <a href="#PowerAnalytics.TimelessMetric"><code>TimelessMetric</code></a>s.</li><li><code>metrics</code>: the input <code>Metric</code>s. It is currently not possible to combine <code>TimedMetric</code>s with <code>TimelessMetric</code>s, though it is possible to combine <code>ComponentSelectorTimedMetric</code>s with <code>SystemTimedMetric</code>s.</li></ul><p><strong>Examples</strong></p><p>This is the implementation of the built-in metric <a href="#PowerAnalytics.Metrics.calc_load_from_storage"><code>calc_load_from_storage</code></a>, which computes the preexisting built-in metrics <a href="#PowerAnalytics.Metrics.calc_active_power_in"><code>calc_active_power_in</code></a> and <a href="#PowerAnalytics.Metrics.calc_active_power_out"><code>calc_active_power_out</code></a> and combines them by subtraction:</p><pre><code class="language-julia hljs">const calc_load_from_storage = compose_metrics(
    &quot;LoadFromStorage&quot;,
    (-),
    calc_active_power_in, calc_active_power_out)</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/NREL-Sienna/PowerAnalytics.jl/blob/be0af0fa2b26dbe579f7d4a6ddd6ad8184276435/src/metrics.jl#L592">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="PowerAnalytics.compute" href="#PowerAnalytics.compute"><code>PowerAnalytics.compute</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><p>The <code>compute</code> function is the most important part of the <a href="#PowerAnalytics.Metric"><code>Metric</code></a> interface. Calling a metric as if it were a function is syntactic sugar for calling <code>compute</code>:</p><pre><code class="language-julia hljs"># this:
my_metric1(selector, results; kwargs)
# is the same as this:
compute(my_metric1, results, selector; kwargs)

# and this:
my_metric2(results; kwargs)
# is the same as this:
compute(my_metric2; kwargs)</code></pre><p>Exact keyword arguments and formatting of the resulting <code>DataFrame</code> are documented for each of the existing methods, below. Custom <code>Metric</code> subtypes must implement this function.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/NREL-Sienna/PowerAnalytics.jl/blob/be0af0fa2b26dbe579f7d4a6ddd6ad8184276435/src/metrics.jl#L237">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="PowerAnalytics.compute-Tuple{ComponentTimedMetric, InfrastructureSystems.Results, ComponentSelector}" href="#PowerAnalytics.compute-Tuple{ComponentTimedMetric, InfrastructureSystems.Results, ComponentSelector}"><code>PowerAnalytics.compute</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">compute(
    metric::ComponentTimedMetric,
    results::InfrastructureSystems.Results,
    selector::ComponentSelector;
    kwargs...
) -&gt; Any
</code></pre><p><a href="#PowerAnalytics.compute"><code>compute</code></a> method for <a href="#PowerAnalytics.ComponentTimedMetric"><code>ComponentTimedMetric</code></a>. Compute the given metric on the groups of the given <code>ComponentSelector</code> within the given set of results, returning a <code>DataFrame</code> with a DateTime column and a data column for each group. Exclude components marked as not available.</p><p><strong>Arguments</strong></p><ul><li><code>metric::ComponentTimedMetric</code>: the metric to compute</li><li><code>results::IS.Results</code>: the results from which to fetch data</li><li><code>selector::ComponentSelector</code>: the <code>ComponentSelector</code> on whose subselectors to compute the metric</li><li><code>start_time::Union{Nothing, DateTime} = nothing</code>: the time at which the resulting time series should begin</li><li><code>len::Union{Int, Nothing} = nothing</code>: the number of steps in the resulting time series</li></ul><p>See also: <a href="#PowerAnalytics.compute"><code>compute</code></a> unified function documentation</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/NREL-Sienna/PowerAnalytics.jl/blob/be0af0fa2b26dbe579f7d4a6ddd6ad8184276435/src/metrics.jl#L395">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="PowerAnalytics.compute-Tuple{ComponentTimedMetric, InfrastructureSystems.Results, Component}" href="#PowerAnalytics.compute-Tuple{ComponentTimedMetric, InfrastructureSystems.Results, Component}"><code>PowerAnalytics.compute</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">compute(
    metric::ComponentTimedMetric,
    results::InfrastructureSystems.Results,
    comp::Component;
    kwargs...
) -&gt; Any
</code></pre><p>Like <a href="#PowerAnalytics.compute-Tuple{ComponentTimedMetric, InfrastructureSystems.Results, ComponentSelector}"><code>compute(metric::ComponentTimedMetric, results::IS.Results, selector::ComponentSelector; kwargs...)</code></a> but for <a href="https://nrel-sienna.github.io/PowerSystems.jl/stable/api/public/#PowerSystems.Component"><code>Component</code></a>s rather than <code>ComponentSelector</code>s, used in the implementation of that method. Compute the given metric on the given component within the given set of results, returning a <code>DataFrame</code> with a <code>DateTime</code> column and a data column labeled with the component&#39;s name.</p><p><strong>Arguments</strong></p><ul><li><code>metric::ComponentTimedMetric</code>: the metric to compute</li><li><code>results::IS.Results</code>: the results from which to fetch data</li><li><code>comp::Component</code>: the component on which to compute the metric</li><li><code>start_time::Union{Nothing, DateTime} = nothing</code>: the time at which the resulting time series should begin</li><li><code>len::Union{Int, Nothing} = nothing</code>: the number of steps in the resulting time series</li></ul><p>See also: <a href="#PowerAnalytics.compute"><code>compute</code></a> unified function documentation</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/NREL-Sienna/PowerAnalytics.jl/blob/be0af0fa2b26dbe579f7d4a6ddd6ad8184276435/src/metrics.jl#L258">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="PowerAnalytics.compute-Tuple{CustomTimedMetric, InfrastructureSystems.Results, Union{ComponentSelector, Component}}" href="#PowerAnalytics.compute-Tuple{CustomTimedMetric, InfrastructureSystems.Results, Union{ComponentSelector, Component}}"><code>PowerAnalytics.compute</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">compute(
    metric::CustomTimedMetric,
    results::InfrastructureSystems.Results,
    comp::Union{ComponentSelector, Component};
    kwargs...
) -&gt; Any
</code></pre><p><a href="#PowerAnalytics.compute"><code>compute</code></a> method for <a href="#PowerAnalytics.CustomTimedMetric"><code>CustomTimedMetric</code></a>. Compute the given metric on the given component within the given set of results, returning a <code>DataFrame</code> with a <code>DateTime</code> column and a data column labeled with the component&#39;s name. Exclude components marked as not available.</p><p><strong>Arguments</strong></p><ul><li><code>metric::CustomTimedMetric</code>: the metric to compute</li><li><code>results::IS.Results</code>: the results from which to fetch data</li><li><code>comp::Component</code>: the component on which to compute the metric</li><li><code>start_time::Union{Nothing, DateTime} = nothing</code>: the time at which the resulting time series should begin</li><li><code>len::Union{Int, Nothing} = nothing</code>: the number of steps in the resulting time series</li></ul><p>See also: <a href="#PowerAnalytics.compute"><code>compute</code></a> unified function documentation</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/NREL-Sienna/PowerAnalytics.jl/blob/be0af0fa2b26dbe579f7d4a6ddd6ad8184276435/src/metrics.jl#L279">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="PowerAnalytics.compute-Tuple{ResultsTimelessMetric, InfrastructureSystems.Results, Nothing}" href="#PowerAnalytics.compute-Tuple{ResultsTimelessMetric, InfrastructureSystems.Results, Nothing}"><code>PowerAnalytics.compute</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">compute(
    metric::ResultsTimelessMetric,
    results::InfrastructureSystems.Results,
    selector::Nothing
) -&gt; DataFrames.DataFrame
</code></pre><p>Convenience method that ignores the <code>selector</code> argument and redirects to <a href="#PowerAnalytics.compute-Tuple{ResultsTimelessMetric, InfrastructureSystems.Results}"><code>compute(metric::ResultsTimelessMetric, results::IS.Results; kwargs...)</code></a> for the purposes of <a href="#PowerAnalytics.compute_all"><code>compute_all</code></a>.</p><p>See also: <a href="#PowerAnalytics.compute"><code>compute</code></a> unified function documentation</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/NREL-Sienna/PowerAnalytics.jl/blob/be0af0fa2b26dbe579f7d4a6ddd6ad8184276435/src/metrics.jl#L338">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="PowerAnalytics.compute-Tuple{ResultsTimelessMetric, InfrastructureSystems.Results}" href="#PowerAnalytics.compute-Tuple{ResultsTimelessMetric, InfrastructureSystems.Results}"><code>PowerAnalytics.compute</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">compute(
    metric::ResultsTimelessMetric,
    results::InfrastructureSystems.Results
) -&gt; DataFrames.DataFrame
</code></pre><p><a href="#PowerAnalytics.compute"><code>compute</code></a> method for <a href="#PowerAnalytics.ResultsTimelessMetric"><code>ResultsTimelessMetric</code></a>. Compute the given metric on the given set of results, returning a <code>DataFrame</code> with a single cell. Exclude components marked as not available.</p><p><strong>Arguments</strong></p><ul><li><code>metric::ResultsTimelessMetric</code>: the metric to compute</li><li><code>results::IS.Results</code>: the results from which to fetch data</li></ul><p>See also: <a href="#PowerAnalytics.compute"><code>compute</code></a> unified function documentation</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/NREL-Sienna/PowerAnalytics.jl/blob/be0af0fa2b26dbe579f7d4a6ddd6ad8184276435/src/metrics.jl#L320">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="PowerAnalytics.compute-Tuple{SystemTimedMetric, InfrastructureSystems.Results, Nothing}" href="#PowerAnalytics.compute-Tuple{SystemTimedMetric, InfrastructureSystems.Results, Nothing}"><code>PowerAnalytics.compute</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">compute(
    metric::SystemTimedMetric,
    results::InfrastructureSystems.Results,
    selector::Nothing;
    kwargs...
) -&gt; Any
</code></pre><p>Convenience method that ignores the <code>selector</code> argument and redirects to <a href="#PowerAnalytics.compute-Tuple{SystemTimedMetric, InfrastructureSystems.Results}"><code>compute(metric::SystemTimedMetric, results::IS.Results; kwargs...)</code></a> for the purposes of <a href="#PowerAnalytics.compute_all"><code>compute_all</code></a>.</p><p>See also: <a href="#PowerAnalytics.compute"><code>compute</code></a> unified function documentation</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/NREL-Sienna/PowerAnalytics.jl/blob/be0af0fa2b26dbe579f7d4a6ddd6ad8184276435/src/metrics.jl#L349">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="PowerAnalytics.compute-Tuple{SystemTimedMetric, InfrastructureSystems.Results}" href="#PowerAnalytics.compute-Tuple{SystemTimedMetric, InfrastructureSystems.Results}"><code>PowerAnalytics.compute</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">compute(
    metric::SystemTimedMetric,
    results::InfrastructureSystems.Results;
    kwargs...
) -&gt; Any
</code></pre><p><a href="#PowerAnalytics.compute"><code>compute</code></a> method for <a href="#PowerAnalytics.SystemTimedMetric"><code>SystemTimedMetric</code></a>. Compute the given metric on the <a href="https://nrel-sienna.github.io/PowerSystems.jl/stable/api/public/#PowerSystems.System"><code>System</code></a> associated with the given set of results, returning a <code>DataFrame</code> with a <code>DateTime</code> column and a data column.</p><p><strong>Arguments</strong></p><ul><li><code>metric::SystemTimedMetric</code>: the metric to compute</li><li><code>results::IS.Results</code>: the results from which to fetch data</li><li><code>start_time::Union{Nothing, DateTime} = nothing</code>: the time at which the resulting time series should begin</li><li><code>len::Union{Int, Nothing} = nothing</code>: the number of steps in the resulting time series</li></ul><p>See also: <a href="#PowerAnalytics.compute"><code>compute</code></a> unified function documentation</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/NREL-Sienna/PowerAnalytics.jl/blob/be0af0fa2b26dbe579f7d4a6ddd6ad8184276435/src/metrics.jl#L300">source</a></section></article><h2 id="Miscellaneous"><a class="docs-heading-anchor" href="#Miscellaneous">Miscellaneous</a><a id="Miscellaneous-1"></a><a class="docs-heading-anchor-permalink" href="#Miscellaneous" title="Permalink"></a></h2><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="PowerAnalytics.unweighted_sum" href="#PowerAnalytics.unweighted_sum"><code>PowerAnalytics.unweighted_sum</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">unweighted_sum(x) -&gt; Any
</code></pre><p>A version of <a href="https://docs.julialang.org/en/v1/base/collections/#Base.sum"><code>sum</code></a> that ignores a second argument, for use where aggregation metadata is at play.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/NREL-Sienna/PowerAnalytics.jl/blob/be0af0fa2b26dbe579f7d4a6ddd6ad8184276435/src/builtin_metrics.jl#L44">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="PowerAnalytics.weighted_mean" href="#PowerAnalytics.weighted_mean"><code>PowerAnalytics.weighted_mean</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">weighted_mean(vals, weights) -&gt; Any
</code></pre><p>Compute the mean of <code>values</code> weighted by the corresponding entries of <code>weights</code>. Arguments may be vectors or vectors of vectors. A weight of <code>0</code> cancels out a value of <code>NaN</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/NREL-Sienna/PowerAnalytics.jl/blob/be0af0fa2b26dbe579f7d4a6ddd6ad8184276435/src/builtin_metrics.jl#L19">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="PowerAnalytics.metric_selector_to_string" href="#PowerAnalytics.metric_selector_to_string"><code>PowerAnalytics.metric_selector_to_string</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">metric_selector_to_string(
    m::Metric,
    e::Union{ComponentSelector, Component}
) -&gt; Any
</code></pre><p>Canonical way to represent a <code>(Metric, ComponentSelector)</code> or <code>(Metric, Component)</code> pair as a string.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/NREL-Sienna/PowerAnalytics.jl/blob/be0af0fa2b26dbe579f7d4a6ddd6ad8184276435/src/metrics.jl#L195">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="PowerAnalytics.AGG_META_KEY" href="#PowerAnalytics.AGG_META_KEY"><code>PowerAnalytics.AGG_META_KEY</code></a> — <span class="docstring-category">Constant</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><p>Column metadata key whose value, if any, is additional information to be passed to aggregation functions. Values of <code>nothing</code> are equivalent to absence of the entry.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/NREL-Sienna/PowerAnalytics.jl/blob/be0af0fa2b26dbe579f7d4a6ddd6ad8184276435/src/output_utils.jl#L11">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="PowerAnalytics.DATETIME_COL" href="#PowerAnalytics.DATETIME_COL"><code>PowerAnalytics.DATETIME_COL</code></a> — <span class="docstring-category">Constant</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><p>Name of the column that represents the time axis in computed DataFrames. Currently equal to <code>&quot;DateTime&quot;</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/NREL-Sienna/PowerAnalytics.jl/blob/be0af0fa2b26dbe579f7d4a6ddd6ad8184276435/src/input_utils.jl#L63">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="PowerAnalytics.META_COL_KEY" href="#PowerAnalytics.META_COL_KEY"><code>PowerAnalytics.META_COL_KEY</code></a> — <span class="docstring-category">Constant</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><p>Column metadata key whose value signifies whether the column is metadata. Metadata columns are excluded from <code>get_data_cols</code> and similar and can be used to represent things like a time aggregation.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/NREL-Sienna/PowerAnalytics.jl/blob/be0af0fa2b26dbe579f7d4a6ddd6ad8184276435/src/output_utils.jl#L1">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="PowerAnalytics.RESULTS_COL" href="#PowerAnalytics.RESULTS_COL"><code>PowerAnalytics.RESULTS_COL</code></a> — <span class="docstring-category">Constant</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><p>Name of a column that represents whole-of-<code>Results</code> data. Currently equal to <code>&quot;Results&quot;</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/NREL-Sienna/PowerAnalytics.jl/blob/be0af0fa2b26dbe579f7d4a6ddd6ad8184276435/src/output_utils.jl#L8">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="PowerAnalytics.SYSTEM_COL" href="#PowerAnalytics.SYSTEM_COL"><code>PowerAnalytics.SYSTEM_COL</code></a> — <span class="docstring-category">Constant</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><p>Name of a column that represents whole-of-<code>System</code> data. Currently equal to <code>&quot;System&quot;</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/NREL-Sienna/PowerAnalytics.jl/blob/be0af0fa2b26dbe579f7d4a6ddd6ad8184276435/src/input_utils.jl#L66">source</a></section></article><h2 id="Old-PowerAnalytics"><a class="docs-heading-anchor" href="#Old-PowerAnalytics">Old PowerAnalytics</a><a id="Old-PowerAnalytics-1"></a><a class="docs-heading-anchor-permalink" href="#Old-PowerAnalytics" title="Permalink"></a></h2><p>This interface predates the <code>1.0</code> version and will <a href="https://github.com/NREL-Sienna/PowerAnalytics.jl/issues/28">eventually</a> be deprecated.</p><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="PowerAnalytics.categorize_data-Tuple{Dict{Symbol, DataFrames.DataFrame}, Dict}" href="#PowerAnalytics.categorize_data-Tuple{Dict{Symbol, DataFrames.DataFrame}, Dict}"><code>PowerAnalytics.categorize_data</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">categorize_data(
    data::Dict{Symbol, DataFrames.DataFrame},
    aggregation::Dict;
    curtailment,
    slacks
) -&gt; Dict{String, DataFrames.DataFrame}
</code></pre><p>Re-categorizes data according to an aggregation dictionary</p><ul><li>makes no guarantee of complete data collection *</li></ul><p><strong>Example</strong></p><pre><code class="language-julia hljs">aggregation = PA.make_fuel_dictionary(results_uc.system)
categorize_data(gen_uc.data, aggregation)</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/NREL-Sienna/PowerAnalytics.jl/blob/be0af0fa2b26dbe579f7d4a6ddd6ad8184276435/src/get_data.jl#L552">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="PowerAnalytics.make_fuel_dictionary-Tuple{System, Dict{NamedTuple, String}}" href="#PowerAnalytics.make_fuel_dictionary-Tuple{System, Dict{NamedTuple, String}}"><code>PowerAnalytics.make_fuel_dictionary</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">make_fuel_dictionary(
    sys::System,
    mapping::Dict{NamedTuple, String};
    filter_func,
    kwargs...
) -&gt; Dict{Any, Any}
</code></pre><pre><code class="nohighlight hljs">generators = make_fuel_dictionary(system::PSY.System, mapping::Dict{NamedTuple, String})</code></pre><p>This function makes a dictionary of fuel type and the generators associated.</p><p><strong>Arguments</strong></p><ul><li><code>sys::PSY.System</code>: the system that is used to create the results</li><li><code>results::IS.Results</code>: results</li></ul><p><strong>Keyword Arguments</strong></p><ul><li><code>categories::Dict{String, NamedTuple}</code>: if stacking by a different category is desired</li></ul><p><strong>Examples</strong></p><pre><code class="language-julia hljs">results = solve_op_model!(OpModel)
generators = make_fuel_dictionary(sys)</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/NREL-Sienna/PowerAnalytics.jl/blob/be0af0fa2b26dbe579f7d4a6ddd6ad8184276435/src/fuel_results.jl#L67">source</a></section></article></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../../tutorials/PA_workflow_tutorial/">« Simulation Scenarios Analysis</a><a class="docs-footer-nextpage" href="../developer_guidelines/">Developer Guidelines »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="auto">Automatic (OS)</option><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option><option value="catppuccin-latte">catppuccin-latte</option><option value="catppuccin-frappe">catppuccin-frappe</option><option value="catppuccin-macchiato">catppuccin-macchiato</option><option value="catppuccin-mocha">catppuccin-mocha</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 1.11.4 on <span class="colophon-date" title="Monday 26 May 2025 18:29">Monday 26 May 2025</span>. Using Julia version 1.11.5.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
